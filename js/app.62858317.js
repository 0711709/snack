(function(t){function e(e){for(var s,r,l=e[0],o=e[1],c=e[2],d=0,m=[];d<l.length;d++)r=l[d],i[r]&&m.push(i[r][0]),i[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"039a":function(t,e,a){"use strict";var s=a("3760"),i=a.n(s);i.a},"0780":function(t,e,a){"use strict";var s=a("3bd2"),i=a.n(s);i.a},"0edc":function(t,e,a){"use strict";var s=a("3c93"),i=a.n(s);i.a},1377:function(t,e,a){},"1bc3":function(t,e,a){},"1f56":function(t,e,a){},2797:function(t,e,a){},"34ae":function(t,e,a){t.exports=a.p+"img/mia2.b855c735.png"},3760:function(t,e,a){},"3bd2":function(t,e,a){},"3c93":function(t,e,a){},"3cee":function(t,e,a){"use strict";var s=a("1bc3"),i=a.n(s);i.a},"53a3":function(t,e,a){"use strict";var s=a("c863"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("6b54"),a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"global-nav"},[s("div",{staticClass:"container"},[s("el-row",[s("el-col",{staticClass:"text-left",attrs:{span:12}},[s("router-link",{staticClass:"nav-item",attrs:{to:"/"}},[t._v("喵喵铺")])],1),s("el-col",{staticClass:"text-right",attrs:{span:12}},[t.session.loggedin()?s("span",[s("router-link",{staticClass:"nav-item",attrs:{to:"/my/cart"}},[t._v("个人中心")]),s("router-link",{staticClass:"nav-item",attrs:{to:"/my/order"}},[t._v("我的订单")]),t.session.user().IS_ADMIN?s("router-link",{staticClass:"nav-item",attrs:{to:"/admin/user"}},[t._v("管理面板")]):t._e(),s("span",{staticClass:"nav-item",on:{click:function(e){return t.session.logout()}}},[t._v("登出")])],1):s("span",[s("router-link",{staticClass:"nav-item",attrs:{to:"/login"}},[t._v("登录")]),s("router-link",{staticClass:"nav-item",attrs:{to:"/signup"}},[t._v("注册")])],1)])],1)],1)]),s("router-view"),s("div",{staticClass:"global-footer"},[s("div",{staticClass:"container"},[s("el-row",{staticClass:"policy"},[s("el-col",{staticClass:"text-center footer-item",attrs:{span:6}},[s("i",{staticClass:"el-icon-star-on"}),t._v("正品保障\n        ")]),s("el-col",{staticClass:"text-center footer-item",attrs:{span:6}},[s("i",{staticClass:"el-icon-success"}),t._v("新鲜美味\n        ")]),s("el-col",{staticClass:"text-center footer-item",attrs:{span:6}},[s("i",{staticClass:"el-icon-info"}),t._v("厂家直销\n        ")]),s("el-col",{staticClass:"text-center footer-item",attrs:{span:6}},[s("i",{staticClass:"el-icon-goods"}),t._v("满99包邮\n        ")])],1)],1),s("el-row",{staticClass:"info"},[s("div",{staticClass:"container"},[s("el-col",{staticClass:"text-center f-left",attrs:{span:12}},[s("img",{attrs:{src:a("34ae"),alt:""}}),s("p",[t._v("喵喵铺")])]),s("el-col",{attrs:{span:12}},[s("p",[t._v("©biaoyansu.com 表B1-20190408 表ICP备186666666号-1")]),s("p",[t._v("企业名称：表铺子科技有限公司")]),s("p",[t._v("由表学员搭建运营")]),s("p",[t._v("地址: 神圣兽国游尾郡窝窝乡 联系方式: 888-888-8888")])])],1)])],1)],1)},n=[],r=a("f499"),l=a.n(r);function o(t,e){localStorage.setItem(t,l()(e))}function c(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null}var u={set:o,get:c};function d(){return localStorage.getItem("sessionId")}function m(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";localStorage.setItem("sessionId",t),u.set("user",e),location.href=a}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";localStorage.removeItem("sessionId"),localStorage.removeItem("user"),location.href=t}function f(){return u.get("user")}var h={user:f,login:m,logout:p,loggedin:d},v={name:"app",data:function(){return{session:h}},filter:{cutR:function(t){return t.length<3?t:t.substring(0,4)+"..."}}},_=v,g=(a("fe8b"),a("2877")),b=Object(g["a"])(_,i,n,!1,null,"78a22682",null),C=b.exports,y=a("5c96"),w=a.n(y),k=(a("0fae"),a("f5df"),a("585e"),a("8c4f")),x=a("0a0d"),$=a.n(x),O=a("bc3a"),S=a.n(O),P="3625bc2df9f51babd0d651bef817667d6ab61c9bfdfac059045baa308aabcd81",N=$()();function q(t,e){return btoa(t+e)}function D(t,e){return S.a.post("https://mock.biaoyansu.com/api/1/".concat(t),e,{headers:{"BIAO-MOCK-APP-KEY":P,"BIAO-MOCK-TIMESTAMP":N,"BIAO-MOCK-SIGNATURE":q(P,N)}}).then(function(t){return t.data})}var E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("SearchNav"),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"card-list carousel"},[a("div",{staticClass:"container"},[a("el-carousel",{attrs:{interval:3e3,height:"375px"}},t._l(t.mainImg,function(t,e){return a("el-carousel-item",{key:e},[a("img",{attrs:{src:t.url,alt:""}})])}),1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingNew,expression:"loadingNew"}],staticClass:"card-list cat-product",class:t.loadingNew?"height":""},[a("div",{staticClass:"container"},[t._m(0),a("el-row",{attrs:{gutter:20}},t._l(t.listNew,function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("router-link",{attrs:{to:"/product/"+e.id}},[a("el-card",{staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.main_img[0].url}}),a("div",{staticClass:"text-center content",staticStyle:{padding:"14px"}},[a("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(t._f("cutTitle")(e.title)))]),a("div",{staticClass:"desc",attrs:{title:e.desc}},[t._v(t._s(t._f("cut")(e.desc)))]),a("div",{staticClass:"price"},[a("span",{staticClass:"rmb"},[t._v(t._s(e.price))])])])])],1)],1)}),1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingHot,expression:"loadingHot"}],staticClass:"card-list cat-product",class:t.loadingHot?"height":""},[a("div",{staticClass:"container"},[t._m(1),a("el-row",{attrs:{gutter:20}},t._l(t.listHot,function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("router-link",{attrs:{to:"/product/"+e.id}},[a("el-card",{staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.main_img[0].url}}),a("div",{staticClass:"text-center content",staticStyle:{padding:"14px"}},[a("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(t._f("cutTitle")(e.title)))]),a("div",{staticClass:"desc",attrs:{title:e.desc}},[t._v(t._s(t._f("cut")(e.desc)))]),a("div",{staticClass:"price"},[a("span",{staticClass:"rmb"},[t._v(t._s(e.price))])])])])],1)],1)}),1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingMeat,expression:"loadingMeat"}],staticClass:"card-list cat-product",class:t.loadingMeat?"height":""},[a("div",{staticClass:"container"},[t._m(2),a("el-row",{attrs:{gutter:20}},t._l(t.listMeat,function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("router-link",{attrs:{to:"/product/"+e.id}},[a("el-card",{staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.main_img[0].url}}),a("div",{staticClass:"text-center content",staticStyle:{padding:"14px"}},[a("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(t._f("cutTitle")(e.title)))]),a("div",{staticClass:"desc",attrs:{title:e.desc}},[t._v(t._s(t._f("cut")(e.desc)))]),a("div",{staticClass:"price"},[a("span",{staticClass:"rmb"},[t._v(t._s(e.price))])])])])],1)],1)}),1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingNut,expression:"loadingNut"}],staticClass:"card-list cat-product",class:t.loadingNut?"height":""},[a("div",{staticClass:"container"},[t._m(3),a("el-row",{attrs:{gutter:20}},t._l(t.listNut,function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("router-link",{attrs:{to:"/product/"+e.id}},[a("el-card",{staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.main_img[0].url}}),a("div",{staticClass:"text-center content",staticStyle:{padding:"14px"}},[a("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(t._f("cutTitle")(e.title)))]),a("div",{staticClass:"desc",attrs:{title:e.desc}},[t._v(t._s(t._f("cut")(e.desc)))]),a("div",{staticClass:"price"},[a("span",{staticClass:"rmb"},[t._v(t._s(e.price))])])])])],1)],1)}),1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDrink,expression:"loadingDrink"}],staticClass:"card-list cat-product",class:t.loadingDrink?"height":""},[a("div",{staticClass:"container"},[t._m(4),a("el-row",{attrs:{gutter:20}},t._l(t.listDrink,function(e,s){return a("el-col",{key:s,attrs:{span:6}},[a("router-link",{attrs:{to:"/product/"+e.id}},[a("el-card",{staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:e.main_img[0].url}}),a("div",{staticClass:"text-center content",staticStyle:{padding:"14px"}},[a("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(t._f("cutTitle")(e.title)))]),a("div",{staticClass:"desc",attrs:{title:e.desc}},[t._v(t._s(t._f("cut")(e.desc)))]),a("div",{staticClass:"price"},[a("span",{staticClass:"rmb"},[t._v(t._s(e.price))])])])])],1)],1)}),1)],1)])],1)},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("span",{staticClass:"title"},[t._v("每日新品")]),a("span",{staticClass:"desc"},[t._v("每日更新, 惊喜不断")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("span",{staticClass:"title"},[t._v("热门")]),a("span",{staticClass:"desc"},[t._v("感动人心 价格厚道")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("span",{staticClass:"title"},[t._v("肉类小吃")]),a("span",{staticClass:"desc"},[t._v("便携美味, 解馋小食")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("span",{staticClass:"title"},[t._v("坚果小吃")]),a("span",{staticClass:"desc"},[t._v("小果仁, 大能量")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("span",{staticClass:"title"},[t._v("冲饮乳品")]),a("span",{staticClass:"desc"},[t._v("每天一杯, 健康一生")])])}],M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("el-row",{staticClass:"search-nav",attrs:{gutter:10}},[s("el-col",{staticClass:"image",attrs:{span:6}},[s("router-link",{attrs:{to:"/"}},[s("img",{attrs:{src:a("34ae"),alt:""}})])],1),s("el-col",{attrs:{span:12}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.toSearch(e)}}},[s("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.toSearch},slot:"append"})],1)],1)]),s("el-col",{staticClass:"text-center",attrs:{span:6}},[s("Cart")],1)],1)],1)},z=[],j=(a("386d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buy-cart"},[a("el-badge",{attrs:{value:t.num}},[a("el-button",{attrs:{size:"small"}},[t._v("购物车")])],1),a("div",{staticClass:"cart-all"},[a("el-row",{staticClass:"text-left head"},[t._v("加入的商品")]),a("el-row",{staticClass:"cart-content"},t._l(t.listCart,function(e,s){return a("div",{key:s,staticClass:"item"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"image",attrs:{span:4}},[a("img",{attrs:{src:e.product_snapshot.main_img[0].url}})]),a("el-col",{staticClass:"title text-left",attrs:{span:12}},[a("div",[t._v(t._s(e.product_snapshot.title))]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))])]),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"rmb price"},[t._v(t._s(e.product_snapshot.price))])]),a("el-col",{staticClass:"text-right",attrs:{span:4}},[a("button",{staticClass:"remove",on:{click:function(a){return t.cart.remove(e.product_id)}}},[t._v("x")])])],1)],1)}),0),t.num?a("div",{staticClass:"text-right btn-group"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cart.clear()}}},[t._v("清空购物车")]),a("router-link",{attrs:{to:"/my/cart"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("查看购物车")])],1)],1):a("div",{staticClass:"tip"},[t._v("这里空空如也, 随便转转吧")])],1)],1)}),V=[],B=a("a4bb"),U=a.n(B),L=(a("7514"),{}),A=[],T={onChange:function(t){A.find(function(e){return e===t})||A.push(t)},callPool:function(){A.forEach(function(t){return t(L)})},restore:function(){this.restoreLocal(),this.callPool()},restoreLocal:function(){L=u.get("cart")||{}},change:function(t,e,a,s){L[t]||(L[t]={count:0,product_id:t,product_snapshot:a}),L[t].count+=e,L[t].prop=s,this.sync(),this.callPool()},remove:function(t){delete L[t],this.sync(),this.callPool()},clear:function(){L={},this.sync(),this.callPool()},sync:function(){h.loggedin()&&this.syncCould(),this.syncLocal()},syncLocal:function(){u.set("cart",L)},syncCould:function(){var t=L;D("user/update",{id:h.user().id,cart:t})}};function H(){T.restore()}H();var R=T,K={data:function(){return{num:null,listCart:{},cart:R}},mounted:function(){var t=this;this.listCart=u.get("cart")||{},this.num=U()(this.listCart).length,R.onChange(function(){return t.listCart=u.get("cart")}),R.onChange(function(){return t.num=U()(t.listCart).length})},methods:{}},F=K,W=(a("c6d9"),Object(g["a"])(F,j,V,!1,null,"3bbee5b0",null)),J=W.exports,Y={components:{Cart:J},data:function(){return{search:{keyword:""}}},mounted:function(){},methods:{toSearch:function(){this.$router.push({path:"/search",query:this.search})}}},G=Y,Q=(a("0edc"),Object(g["a"])(G,M,z,!1,null,null,null)),Z=Q.exports,X={components:{SearchNav:Z},data:function(){return{listNew:[],listHot:[],listMeat:[],listNut:[],listDrink:[],mainImg:[],loading:!0,loadingNew:!0,loadingHot:!0,loadingMeat:!0,loadingNut:!0,loadingDrink:!0}},mounted:function(){this.readAll(),this.readMainImg()},methods:{read:function(t,e,a){var s=this;D("product/read",e).then(function(e){e.success&&(s[t]=e.data,s[a]=!1)})},readAll:function(){this.read("listNew",{limit:4,where:{and:{is_new:!0}}},"loadingNew"),this.read("listHot",{limit:4,where:{and:{is_hot:!0}}},"loadingHot"),this.read("listMeat",{limit:4,where:{and:{cat_id:7}}},"loadingMeat"),this.read("listNut",{limit:4,where:{and:{cat_id:3}}},"loadingNut"),this.read("listDrink",{limit:4,where:{and:{cat_id:8}}},"loadingDrink")},readMainImg:function(){var t=this;D("product/find",{id:17}).then(function(e){e.success&&(t.mainImg=e.data.detail,t.loading=!1)})}},filters:{cutTitle:function(t){return t.length<10?t:t.substring(0,10)},cut:function(t){return t.length<15?t:t.substring(0,14)+"..."}}},tt=X,et=(a("8b71"),Object(g["a"])(tt,E,I,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SearchNav"),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"product"},[a("div",{staticClass:"product-head"},[a("div",{staticClass:"container"},[a("router-link",{staticClass:"item item-home",attrs:{to:"/"}},[t._v("首页")]),a("span",{staticClass:"item"},[t._v(">")]),a("span",{staticClass:"item"},[t._v(t._s(t.row.$cat.name||"分类"))]),a("span",{staticClass:"item"},[t._v(">")]),a("span",{staticClass:"item"},[t._v(t._s(t.row.$brand.name||"品牌"))])],1)]),a("div",{staticClass:"overview"},[a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-carousel",{attrs:{height:"350px"}},t._l(t.row.main_img,function(t,e){return a("el-carousel-item",{key:e},[a("img",{attrs:{src:t.url,alt:"图"}})])}),1)],1),a("el-col",{attrs:{span:14}},[a("el-row",[a("div",{staticClass:"title"},[a("h3",[t._v(t._s(t.row.title))])])]),a("div",{staticClass:"desc"},[t._v(t._s(t.row.desc))]),a("div",{staticClass:"price-card background"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"small"},[t._v("价格")])]),a("el-col",{attrs:{span:22}},[a("span",{staticClass:"hot rmb"},[t._v(t._s(t.row.price))])])],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"small"},[t._v("运费")])]),a("el-col",{attrs:{span:22}},[a("span",{staticClass:"rmb small"},[t._v(t._s(t.row.shipping_fee))])])],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("span",{staticClass:"small"},[t._v("服务")])]),a("el-col",{staticClass:"service",attrs:{span:22}},[a("span",{staticClass:"small-black"},[t._v("正品保障")]),a("span",{staticClass:"small-black"},[t._v("破损包换")]),a("span",{staticClass:"small-black"},[t._v("满99包邮")])])],1)],1),a("el-row",{staticClass:"info"},[a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("span",{staticClass:"small"},[t._v("库存")]),a("span",{staticClass:"hot-small"},[t._v(t._s(t.row.total))])]),a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("span",{staticClass:"small"},[t._v("累计销量")]),a("span",{staticClass:"hot-small"},[t._v("999")])]),a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("span",{staticClass:"small"},[t._v("送积分")]),a("span",{staticClass:"hot-small"},[t._v("10")])])],1),t._l(t.row.prop,function(e,s){return a("el-row",{key:s,staticClass:"space option"},[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"small"},[t._v(t._s(s))])]),a("el-col",{staticClass:"pill-option",attrs:{span:21}},t._l(e.split("|"),function(e,i){return a("span",{key:i,class:t.form.prop[s]==e?"active":"",on:{click:function(a){return t.setProp(s,e)}}},[t._v(t._s(e))])}),0)],1)}),a("el-row",{staticClass:"space much"},[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"small number"},[t._v("数量")])]),a("el-col",{attrs:{span:21}},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:10},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1)],1),a("el-row",{staticClass:"space"},[a("el-col",{attrs:{span:21,offset:3}},[a("el-button",{attrs:{type:"danger",size:"medium",plain:""},on:{click:t.createOrder}},[t._v("立即购买")]),a("el-button",{attrs:{type:"danger",size:"medium"},on:{click:t.addCart}},[t._v("加入购物车")])],1)],1)],2)],1)],1)]),a("div",{staticClass:"detail"},[a("div",{staticClass:"container"},[a("el-tabs",{staticClass:"card",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"商品详情"}},t._l(t.row.detail,function(t,e){return a("div",{key:e},[a("img",{attrs:{src:t.url,alt:"图"}})])}),0),a("el-tab-pane",{attrs:{label:"产品参数"}},[a("div",{staticClass:"product-info"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("p",[t._v("生产许可证编号：SC10443061200101")]),a("p",[t._v("厂址：湖南省岳阳市经济开发区康王工")]),a("p",[t._v("储藏方法：30℃以下阴凉避光保存")]),a("p",[t._v("产品名称：劲仔 劲仔豆干1000克组合")]),a("p",[t._v("口味: 60号】香辣味*2盒 61号】麻辣味")]),a("p",[t._v("重量(g): 1000")])]),a("el-col",{attrs:{span:8}},[a("p",[t._v("产品标准号：Q/YPHW 0003S1")]),a("p",[t._v("厂家联系方式：0730-8652199")]),a("p",[t._v("保质期：365 天")]),a("p",[t._v("品牌: 劲仔")]),a("p",[t._v("产地: 中国大陆")]),a("p",[t._v("包装方式: 包装")])]),a("el-col",{attrs:{span:8}},[a("p",[t._v("厂名：湖南省华文食品有限公司")]),a("p",[t._v("配料表：饮用水、非转基因大豆、植物油")]),a("p",[t._v("食品添加剂：有")]),a("p",[t._v("系列: 劲仔豆干1000克组合")]),a("p",[t._v("省份: 湖南省")]),a("p",[t._v("豆制品种类: 豆腐干")])])],1)],1)])],1)],1)])])],1)},it=[];a("ac6a");function nt(t){var e=0;return t.forEach(function(t){e+=t.product_snapshot.price*t.count}),e}function rt(t){return location.origin+"/"+t}var lt={components:{SearchNav:Z},data:function(){return{num:1,row:{$cat:{name:""},$brand:{name:""}},findParams:{id:null,with:[{model:"brand",relation:"belongs_to"},{model:"cat",relation:"belongs_to"}]},form:{prop:{}},loading:!0,cart:R}},mounted:function(){this.findParams.id=this.$route.params.id,this.find()},methods:{find:function(){var t=this;D("product/find",this.findParams).then(function(e){e.success&&(t.row=e.data,t.loading=!1)})},setProp:function(t,e){this.$set(this.form.prop,t,e)},allPropChecked:function(){var t=this.row.prop;for(var e in t)if(!this.form.prop[e])return!1;return!0},createOrder:function(){var t=this;if(this.allPropChecked()){this.form.product_id=this.row.id,this.form.count=this.num,this.form.product_snapshot=this.row,this.form.status;var e={detail:[this.form]};e.user_id=h.user().id,e.sum=nt(e.detail),D("order/create",e).then(function(e){e.success&&t.$router.push("/my/order/".concat(e.data.id))})}else{var a=this.$createElement;this.$msgbox({title:"提示",message:a("p",null,[a("span",null,"请选择所有商品类型 ")]),confirmButtonText:"确定"})}},addCart:function(){if(this.allPropChecked())R.change(this.row.id,this.num,this.row,this.form.prop);else{var t=this.$createElement;this.$msgbox({title:"提示",message:t("p",null,[t("span",null,"请选择所有商品类型 ")]),confirmButtonText:"确定"})}}}},ot=lt,ct=(a("e903"),Object(g["a"])(ot,st,it,!1,null,null,null)),ut=ct.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signup"},[a("div",{staticClass:"container"},[a("el-form",{staticClass:"form-container",attrs:{"label-position":"top"}},[a("h1",{staticClass:"text-center"},[t._v("注册")]),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"手机注册",name:"phone"}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请先输入手机号"},nativeOn:{keyup:function(e){return t.debounceValidate(e)}},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),t.errors.phone?a("span",{staticClass:"error"},[t._v(t._s(t.errors.phone))]):t._e(),t.pending?a("span",{staticClass:"loading-text"},[a("i",{staticClass:"el-icon-loading loading"}),t._v("查询中\n            ")]):t._e()],1)],1),a("el-tab-pane",{attrs:{label:"邮箱注册",name:"mail"}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请先输入邮箱"},nativeOn:{keyup:function(e){return t.debounceValidate(e)}},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}}),t.errors.mail?a("span",{staticClass:"error"},[t._v(t._s(t.errors.mail))]):t._e(),t.pending?a("span",{staticClass:"loading-text"},[a("i",{staticClass:"el-icon-loading loading"}),t._v("查询中\n            ")]):t._e()],1)],1)],1),a("el-form-item",{attrs:{label:"验证码"}},[a("el-input",{model:{value:t.formCode,callback:function(e){t.formCode=e},expression:"formCode"}},[a("el-button",{staticClass:"button",attrs:{slot:"append",disabled:!!t.countDown||!t.canSend},on:{click:t.sendCode},slot:"append"},[t.countDown?a("span",[t._v(t._s(t.countDown)+"s后获取")]):a("span",[t._v("发送验证码")])])],1),t.errors.code?a("span",{staticClass:"error"},[t._v(t._s(t.errors.code))]):t._e()],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"密码长度不小于6位","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t.errors.password?a("span",{staticClass:"error"},[t._v(t._s(t.errors.password))]):t._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:!t.valid},on:{click:t.signup}},[t._v("注册")]),a("el-button",{attrs:{type:"text"}},[a("router-link",{attrs:{to:"/"}},[t._v("已有帐号, 直接登录")])],1)],1)],1)],1)])},mt=[],pt=a("bd86"),ft=(a("3b2b"),a("6762"),a("2fdb"),a("aef6"),a("f559"),a("59ad")),ht=a.n(ft),vt={numeric:function(t){return!!/^\d+$/.test(t.toString())},required:function(t){return!(!t&&0!==t)},min:function(t,e){return!(t<e)},max:function(t,e){return!(ht()(t)>e)},between:function(t,e,a){return!(!this.min(t,e)||!this.max(t,a))},positive:function(t){return!!this.numeric(t)&&!(t<=0)},negative:function(t){return!!this.numeric(t)&&!(t>=0)},minLength:function(t,e){return!(t.length<e)},maxLength:function(t,e){return!(t.length>e)},lengthBetween:function(t,e,a){return!(!this.minLength(t,e)||!this.maxLength(t,a))},startsWith:function(t,e){return!!t.startsWith(e)},endsWith:function(t,e){return!!t.endsWith(e)},includes:function(t,e){return!!t.includes(e)},in:function(t,e){return-1!==e.indexOf(t)},mail:function(t){var e=/^\w+@\w+\.\w+$/;return!!e.test(t)},username:function(t){var e=/^[a-zA-Z0-9]\w+$/;return!!e.test(t)},phone:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh";switch(a){case"zh":e=/^(?:\+?(?:86))?(\s|-)?1\d{10}$/;break}return!!e.test(t)},regex:function(t,e){return"string"==typeof e&&(e=new RegExp(e)),!!e.test(t)},unique:function(t,e,a,s){return D("".concat(e,"/").concat(a),{where:{and:Object(pt["a"])({},s,t)}}).then(function(t){return!t.data})}},_t=vt;function gt(t,e){if("required"!==t&&!e&&0!==e)return!0;for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return vt[t].apply(vt,[e].concat(s))}var bt={data:function(){return{activeName:"phone",byObj:{phone:"手机",mail:"邮箱"},form:{},formCode:null,countDown:0,errors:{phone:"",mail:"",password:"",code:""},code:null,valid:!1,pending:!1,timer:null,canSend:!1}},mounted:function(){},methods:{debounceValidate:function(){var t=this;this.canSend=!1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.validateSignBy()},300)},validateSignBy:function(){var t=this,e=this.form,a=this.activeName;e[a]?gt([a],e[a])?(this.pending=!0,D("user/exists",{where:{and:Object(pt["a"])({},a,e[a])}}).then(function(e){e.success&&(t.pending=!1,e.data?t.errors[a]="".concat(t.byObj[a],"已注册"):t.canSend=!0)}),this.errors[a]=""):this.errors[a]="".concat(this.byObj[a],"格式不合法"):this.errors[a]="".concat(this.byObj[a],"为必填项")},validatePasswordAndCode:function(){return this.errors.code=this.errors.password="",this.form.password?this.form.password.length<6&&(this.errors.password="密码长度不能小于六位"):this.errors.password="密码不能为空",this.formCode!==this.code&&(this.errors.code="验证码有误"),!this.errors.code&&!this.errors.password&&(this.errors.code=this.errors.password="",!0)},count:function(){var t=this;this.countDown=60;var e=setInterval(function(){t.countDown--,t.countDown<=0&&clearInterval(e)},1e3)},sendCode:function(){var t,e=this,a=this.activeName,s={};this.valid=!0,this.count(),t="phone"===a?"sms":"mail",s[a]=this.form[a],D("captcha/".concat(t),s).then(function(t){t.success&&(e.code=atob(t.data.result),e.$message({message:"发送成功",type:"success"}))})},signup:function(){var t=this;this.validatePasswordAndCode()&&D("user/create",this.form).then(function(e){e.success?t.$router.push("/login"):t.$message({message:"注册失败, 请重试",type:"warning"})})}}},Ct=bt,yt=(a("8d1b"),Object(g["a"])(Ct,dt,mt,!1,null,null,null)),wt=yt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"container"},[a("el-form",{staticClass:"form-container",attrs:{"label-position":"top"}},[a("h1",{staticClass:"text-center"},[t._v("登录")]),a("el-form-item",{attrs:{label:"手机号/邮箱"}},[a("el-input",{attrs:{placeholder:"请输入手机或密码"},model:{value:t.unique,callback:function(e){t.unique=e},expression:"unique"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.errors?a("span",{staticClass:"error"},[t._v(t._s(t.errors))]):t._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")]),a("el-button",{attrs:{type:"text"}},[a("router-link",{attrs:{to:"/recover"}},[t._v("忘记密码?")])],1)],1)],1)],1)])},xt=[],$t={data:function(){return{errors:"",unique:"",password:"",loginBy:"phone"}},methods:{validate:function(){this.errors="",this.unique&&this.password||(this.errors="请输入手机或邮箱和密码")},login:function(){var t,e=this;this.validate(),this.unique.includes("@")?this.loginBy="mail":this.loginBy="phone",api("user/first",{where:{and:(t={},Object(pt["a"])(t,this.loginBy,this.unique),Object(pt["a"])(t,"password",this.password),t)},except:["password"]}).then(function(t){if(t.success)if(t.data){if(u.get("cart")?e.mergeCart(t.data.cart):u.set("cart",t.data.cart),delete t.data.cart,"admin"===t.data.username)return t.data.IS_ADMIN=!0,void h.login(t.data.id,t.data,"/");h.login(t.data.id,t.data,"/")}else e.errors="手机或邮箱或密码错误"})},mergeCart:function(t){var e=u.get("cart"),a=U()(e);console.log(t,a),a.forEach(function(a){t||(t={}),t[a]?t[a].count+=e[a].count:t[a]=e[a]}),u.set("cart",t)}}},Ot=$t,St=(a("039a"),Object(g["a"])(Ot,kt,xt,!1,null,null,null)),Pt=St.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recover"},[a("div",{staticClass:"container"},[a("el-form",{staticClass:"form-container",attrs:{"label-position":"top"}},[a("h1",{staticClass:"text-center"},[t._v("账号恢复")]),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"手机恢复",name:"phone"}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请先输入手机号"},nativeOn:{keyup:function(e){return t.debounceValidate(e)}},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),t.errors.phone?a("span",{staticClass:"error"},[t._v(t._s(t.errors.phone))]):t._e(),t.pending?a("span",{staticClass:"loading-text"},[a("i",{staticClass:"el-icon-loading loading"}),a("span",[t._v("查询中")])]):t._e(),t.exist?t._e():a("el-button",{staticClass:"exist",attrs:{type:"text"}},[a("router-link",{attrs:{to:"/signup"}},[t._v("直接注册")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"邮箱恢复",name:"mail"}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请先输入邮箱"},nativeOn:{keyup:function(e){return t.debounceValidate(e)}},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}}),t.errors.mail?a("span",{staticClass:"error"},[t._v(t._s(t.errors.mail))]):t._e(),t.pending?a("span",{staticClass:"loading-text"},[a("i",{staticClass:"el-icon-loading loading"}),a("span",[t._v("查询中")])]):t._e(),t.exist?t._e():a("el-button",{staticClass:"exist",attrs:{type:"text"}},[a("router-link",{attrs:{to:"/signup"}},[t._v("直接注册")])],1)],1)],1)],1),a("el-form-item",{attrs:{label:"验证码"}},[a("el-input",{model:{value:t.formCode,callback:function(e){t.formCode=e},expression:"formCode"}},[a("el-button",{staticClass:"button",attrs:{slot:"append",disabled:!!t.countDown||!t.canSend},on:{click:t.sendCode},slot:"append"},[t.countDown?a("span",[t._v(t._s(t.countDown)+"s后获取")]):a("span",[t._v("发送验证码")])])],1),t.errors.code?a("span",{staticClass:"error"},[t._v(t._s(t.errors.code))]):t._e()],1),a("el-form-item",{attrs:{label:"设置新密码"}},[a("el-input",{attrs:{placeholder:"密码长度不小于6位","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t.errors.password?a("span",{staticClass:"error"},[t._v(t._s(t.errors.password))]):t._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:!t.valid},on:{click:t.recover}},[t._v("保存")])],1)],1)],1)])},qt=[],Dt={data:function(){return{activeName:"phone",byObj:{phone:"手机",mail:"邮箱"},form:{},formCode:null,countDown:0,errors:{phone:"",mail:"",password:"",code:""},code:null,valid:!1,pending:!1,timer:null,canSend:!1,exist:!0,id:null}},mounted:function(){},methods:{debounceValidate:function(){var t=this;this.canSend=!1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.validateSignBy()},300)},validateSignBy:function(){var t=this,e=this.form,a=this.activeName;this.exist=!0,e[a]?_t[a](e[a])?(this.pending=!0,D("user/first",{where:{and:Object(pt["a"])({},a,e[a])},only:["id"]}).then(function(e){e.success&&(t.pending=!1,e.data?(t.canSend=!0,t.id=e.data.id):(t.errors[a]="".concat(t.byObj[a],"未注册, "),t.exist=!1))}),this.errors[a]=""):this.errors[a]="".concat(this.byObj[a],"格式不合法"):this.errors[a]="".concat(this.byObj[a],"为必填项")},validatePasswordAndCode:function(){return this.errors.code=this.errors.password="",this.form.password?this.form.password.length<6&&(this.errors.password="密码长度不能小于六位"):this.errors.password="密码不能为空",this.formCode!==this.code&&(this.errors.code="验证码有误"),!this.errors.code&&!this.errors.password&&(this.errors.code=this.errors.password="",!0)},count:function(){var t=this;this.countDown=60;var e=setInterval(function(){t.countDown--,t.countDown<=0&&clearInterval(e)},1e3)},sendCode:function(){var t,e=this,a=this.activeName,s={};this.valid=!0,this.count(),t="phone"===a?"sms":"mail",s[a]=this.form[a],D("captcha/".concat(t),s).then(function(t){t.success&&(e.code=atob(t.data.result),e.$message({message:"验证码发送成功",type:"success"}))})},recover:function(){var t=this;this.validatePasswordAndCode()&&(this.form.id=this.id,D("user/update",this.form).then(function(e){e.success?t.$router.push("/login"):t.$message({message:"更新失败, 请重试",type:"warning"})}))}}},Et=Dt,It=(a("a3e4"),Object(g["a"])(Et,Nt,qt,!1,null,null,null)),Mt=It.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"divide"},[s("el-row",{staticClass:"search-nav",attrs:{gutter:10}},[s("el-col",{staticClass:"image",attrs:{span:6}},[s("router-link",{attrs:{to:"/"}},[s("img",{attrs:{src:a("34ae"),alt:""}})])],1),s("el-col",{attrs:{span:12}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.reload(e)}}},[s("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.query.keyword,callback:function(e){t.$set(t.query,"keyword",e)},expression:"query.keyword"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.reload},slot:"append"})],1)],1)]),s("el-col",{staticClass:"text-center",attrs:{span:6}},[s("Cart")],1)],1)],1),s("div",{staticClass:"filter"},[s("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingBrand,expression:"loadingBrand"}],staticClass:"filter-divide",class:t.loadingBrand?"brand-height":""},[s("el-col",{staticClass:"type",attrs:{span:4}},[t._v("品牌")]),s("el-col",{attrs:{span:20}},[s("el-row",{staticClass:"item"},t._l(t.brandList,function(e,a){return s("el-col",{key:a,class:t.query.brandId==e.id?"active":"",attrs:{span:4},nativeOn:{click:function(a){return t.setBrand(e)}}},[t._v(t._s(e.name))])}),1)],1)],1),s("el-row",[s("el-col",{staticClass:"type",attrs:{span:4}},[t._v("分类")]),s("el-col",{attrs:{span:20}},[s("el-row",{staticClass:"item"},t._l(t.catList,function(e,a){return s("el-col",{key:a,class:t.query.catId==e.id?"active":"",attrs:{span:4},nativeOn:{click:function(a){return t.setCat(e)}}},[t._v(t._s(e.name))])}),1)],1)],1)],1),s("div",{staticClass:"bar"},[s("el-radio-group",{attrs:{size:"mini"},on:{change:t.setSortBy},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[s("el-radio-button",{attrs:{label:"新品"},nativeOn:{click:function(e){return t.setSortUp(e)}}}),s("el-radio-button",{attrs:{label:"价格"},nativeOn:{click:function(e){return t.setSortUp(e)}}}),s("el-radio-button",{attrs:{label:"库存"},nativeOn:{click:function(e){return t.setSortUp(e)}}})],1),s("div",{staticClass:"price-group"},[s("el-input",{attrs:{size:"mini",placeholder:"最低价格"},model:{value:t.query.minPrice,callback:function(e){t.$set(t.query,"minPrice",e)},expression:"query.minPrice"}}),s("el-input",{attrs:{size:"mini",placeholder:"最高价格"},model:{value:t.query.maxPrice,callback:function(e){t.$set(t.query,"maxPrice",e)},expression:"query.maxPrice"}}),s("el-button",{staticClass:"btn",attrs:{size:"mini"},on:{click:t.reload}},[t._v("确定")]),s("el-button",{staticClass:"btn",attrs:{size:"mini"},on:{click:t.clear}},[t._v("清除")])],1),s("el-checkbox-group",{attrs:{size:"mini"},on:{change:t.toggle},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"包邮"}}),s("el-checkbox",{attrs:{label:"热门"}}),s("el-checkbox",{attrs:{label:"有货"}})],1)],1),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"result",class:t.loading?"height":""},[t.totalNull?s("div",{staticClass:"search-tip"},[t._v("没找到相关产品，为你推荐以下商品")]):t._e(),s("div",[s("el-row",{attrs:{gutter:20}},t._l(t.result,function(e,a){return s("el-col",{key:a,attrs:{span:6}},[e.main_img?s("router-link",{attrs:{to:"/product/"+e.id}},[s("el-card",{staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[s("img",{staticClass:"image",attrs:{src:e.main_img[0].url}}),s("div",{staticClass:"text-center content",staticStyle:{padding:"14px"}},[s("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(t._f("cutAll")(e.title,10)))]),s("div",{staticClass:"desc",attrs:{title:e.desc}},[t._v(t._s(t._f("cutAll")(e.desc,15)))]),s("div",{staticClass:"price"},[s("span",{staticClass:"rmb"},[t._v(t._s(e.price))])])])])],1):t._e()],1)}),1)],1),t.total>12?s("el-pagination",{staticClass:"pagination text-center",attrs:{background:"",layout:"prev, pager, next","page-size":t.limit,total:t.total,"current-page":t.page},on:{"current-change":t.handleCurrentChange}}):t._e()],1)])},jt=[],Vt=a("cebc"),Bt={components:{Cart:J},data:function(){return{catList:[],brandList:[],query:{},radio:"新品",checkList:[],checkListCopy:["包邮","热门","有货"],sortList:{"新品":"id","价格":"price","库存":"total"},result:[],total:null,limit:12,page:1,loading:!0,loadingCat:!0,loadingBrand:!0,totalNull:!1}},mounted:function(){this.read("cat","loadingCat"),this.read("brand","loadingBrand"),this.query=Object(Vt["a"])({},this.$route.query),this.query.sortBy=this.sortList[this.radio],this.toggle(),this.search()},methods:{read:function(t,e){var a=this;api("".concat(t,"/read")).then(function(s){s.success&&(a[t+"List"]=s.data,a[e]=!1)})},setCat:function(t){if(this.query.catId==t.id)return this.query.catId=null,this.page=1,void this.reload();this.query.catId=t.id,this.page=1,this.reload()},setBrand:function(t){if(this.query.brandId==t.id)return this.query.brandId=null,this.page=1,void this.reload();this.query.brandId=t.id,this.page=1,this.reload()},setSortBy:function(){this.query.sortBy=this.sortList[this.radio],this.page=1,this.reload()},setSortUp:function(){this.query.sortUp?delete this.query.sortUp:this.query.sortUp="1",this.page=1,this.reload()},toggle:function(){var t=this;this.checkListCopy.forEach(function(e){t.query[e]=!1}),this.checkList.forEach(function(e){t.query[e]=!0}),this.page=1,this.reload()},reload:function(){this.$router.push({path:"/search",query:Object(Vt["a"])({},this.query)})},search:function(){var t=this;this.totalNull=!1,this.loading=!0;var e=this.query,a=e.keyword?'"title" contains "'.concat(e.keyword,'"'):'"title" contains ""',s=e.minPrice?'and "price" >= '.concat(e.minPrice):"",i=e.minPrice?'and "price" <= '.concat(e.maxPrice):"",n=e["包邮"]?'and "shipping_fee" = 0':"",r=e["热门"]?'and "is_hot" = 1':"",l=e["有货"]?'and "total" > 0':"",o=e.catId?'and "cat_id" = '.concat(e.catId):"",c=e.brandId?'and "brand_id" = '.concat(e.brandId):"",u="where(\n        ".concat(a," \n        ").concat(s," \n        ").concat(i," \n        ").concat(n," \n        ").concat(r," \n        ").concat(l,"\n        ").concat(o,"\n        ").concat(c,"\n        )"),d={query:u,sort_by:[e.sortBy||"id",e.sortUp?"up":"down"],limit:this.limit,page:this.page};api("product/read",d).then(function(e){e.success&&(t.result=e.data,t.total=e.total,t.loading=!1,0==e.total&&(t.totalNull=!0,t.query=Object(Vt["a"])({},{}),api("product/read").then(function(e){e.success&&(t.result=e.data,t.total=e.total,t.loading=!1)})))})},clear:function(){this.query.minPrice=this.query.maxPrice=null},handleCurrentChange:function(t){this.page=t,this.search()}},watch:{$route:{deep:!0,handler:function(t){this.query=Object(Vt["a"])({},t.query),this.search()}}}},Ut=Bt,Lt=(a("e800"),Object(g["a"])(Ut,zt,jt,!1,null,"20c875fa",null)),At=Lt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my"},[a("SearchNav"),a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"head"},[a("h2",[t._v("个人中心")])]),a("el-menu",{staticClass:"my-menu",attrs:{router:!0}},[a("el-menu-item",{attrs:{index:"/my/cart"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("购物车")])]),a("el-menu-item",{attrs:{index:"/my/order"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("订单")])]),a("el-menu-item",{attrs:{index:"/my/setting"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人设置")])])],1)],1),a("el-col",{attrs:{span:20}},[a("router-view")],1)],1)],1)],1)},Ht=[],Rt={components:{SearchNav:Z}},Kt=Rt,Ft=(a("9694"),Object(g["a"])(Kt,Tt,Ht,!1,null,null,null)),Wt=Ft.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"setting"},[a("div",{staticClass:"header"},[a("div",{staticClass:"edit",class:{editActive:t.editModel},on:{click:t.editOrCancel}},[t.editModel?a("span",[t._v("取消")]):t._e(),t._v("编辑\n      ")])]),a("fieldset",{attrs:{disabled:t.updatePending}},[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-right"},[t._v("昵称")]),a("td",[t.me.nickname||t.editModel?t._e():a("span",[t._v("--")]),t.editModel||t.me.nickname?a("input",{directives:[{name:"model",rawName:"v-model",value:t.me.nickname,expression:"me.nickname"}],attrs:{type:"text",readonly:!t.editModel},domProps:{value:t.me.nickname},on:{focus:function(e){t.error.nickname=!1},input:function(e){e.target.composing||t.$set(t.me,"nickname",e.target.value)}}}):t._e()]),a("td",[t.error.nickname?a("span",{staticClass:"error"},[t._v("昵称长度应小于20位")]):t._e()])]),a("tr",[a("td",{staticClass:"text-right"},[t._v("用户名")]),a("td",[t.me.username||t.editModel?t._e():a("span",[t._v("--")]),t.editModel||t.me.username?a("input",{directives:[{name:"model",rawName:"v-model",value:t.me.username,expression:"me.username"}],attrs:{type:"text",readonly:!t.editModel},domProps:{value:t.me.username},on:{focus:function(e){t.error.username=!1},input:function(e){e.target.composing||t.$set(t.me,"username",e.target.value)}}}):t._e()]),a("td",[t.error.username?a("span",{staticClass:"error"},[t._v(t._s(t.error.username))]):t._e()])]),a("tr",[a("td",{staticClass:"text-right"},[t._v("签名")]),a("td",[t.me.info||t.editModel?t._e():a("span",[t._v("--")]),t.editModel||t.me.info?a("input",{directives:[{name:"model",rawName:"v-model",value:t.me.info,expression:"me.info"}],attrs:{type:"text",readonly:!t.editModel},domProps:{value:t.me.info},on:{focus:function(e){t.error.info=!1},input:function(e){e.target.composing||t.$set(t.me,"info",e.target.value)}}}):t._e()]),a("td",[t.error.info?a("span",{staticClass:"error"},[t._v("签名长度小于50位")]):t._e()])]),t.editModel?a("tr",[a("td"),a("td",[a("button",{on:{click:t.validateAndUpdate}},[t._v("保存更改")])])]):t._e()])])])])])},Yt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("个人设置")])])}],Gt={data:function(){return{me:{},saveMe:{},editModel:!1,updatePending:!1,error:{username:!1,nickname:!1,info:!1}}},mounted:function(){this.me=u.get("user"),this.saveMe=Object(Vt["a"])({},this.me)},methods:{editOrCancel:function(){this.editModel=!this.editModel,this.error.username=!1,this.me=u.get("user")},validateAndUpdate:function(){var t=this;if(this.saveMe.nickname!==this.me.nickname||this.saveMe.username!==this.me.username||this.saveMe.info!==this.me.info){if(!(this.inValidateUsername()||this.inValidateNickname()||this.inValidateInfo())){this.error.nickname=this.error.username=this.error.info=!1,this.updatePending=!0;var e={where:{and:{username:this.me.username}}};D("user/exists",e).then(function(e){var a=t.saveMe.username!==t.me.username;if(e.data&&a)return t.updatePending=!1,void(t.error.username="用户名已存在");t.updateUsername()})}}else this.editModel=!1},updateUsername:function(){var t=this;D("user/update",this.me).then(function(e){e.success&&(t.me=e.data,u.set("user",e.data),t.editModel=!1,t.updatePending=!1)})},inValidateNickname:function(){return!!this.me.nickname&&(this.error.nickname=this.me.nickname.length>20)},inValidateUsername:function(){if(!this.me.username||/[\W_]/.test(this.me.username)||this.me.username.length<4||this.me.username.length>20)return this.error.username="用户名格式有误,长度应介于4到20之间",!0},inValidateInfo:function(){return!!this.me.info&&(this.error.info=this.me.info.length>50)}}},Qt=Gt,Zt=(a("f54e"),Object(g["a"])(Qt,Jt,Yt,!1,null,null,null)),Xt=Zt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"cart"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"商品展示",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"image",attrs:{src:t.row.product_snapshot.main_img[0].url}})]}}])}),a("el-table-column",{attrs:{prop:"product_snapshot.title",label:"商品名称",width:"250"}}),a("el-table-column",{attrs:{label:"数量",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{size:"mini",min:0},on:{change:t.numChange},model:{value:e.row.count,callback:function(a){t.$set(e.row,"count",a)},expression:"scope.row.count"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.product_id)}}},[t._v("删除")])]}}])})],1)],1),t.tableData.length?a("div",{staticClass:"cart-info"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.cart.clear()}}},[t._v("清空购物车")])],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"text-right tip"},[t._v("已选商品 "+t._s(t.productNum)+" 件")]),a("div",{staticClass:"text-right tip"},[t._v("\n          总价\n          "),a("span",{staticClass:"rmb hot"},[t._v(t._s(t.count))])])]),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",disabled:t.goBuy},on:{click:t.createOrder}},[t._v("去结算")])],1)],1)],1):a("div",{staticClass:"cart-info text-center"},[t._v("这里空空如也, 赶快去购物吧")])])},ee=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("购物车")])])}],ae=a("db0c"),se=a.n(ae),ie={data:function(){return{tableData:[],multipleSelection:[],productNum:0,count:0,cart:R,goBuy:!0}},mounted:function(){var t=this;this.tableData=se()(u.get("cart")),R.onChange(function(){return t.tableData=se()(u.get("cart"))})},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.productNum=t.length,t.length>0&&(this.goBuy=!1),this.count=nt(t)},numChange:function(){this.tableData.forEach(function(t){0==t.count&&R.remove(t.product_id)}),this.handleSelectionChange(this.multipleSelection)},handleDelete:function(t){R.remove(t)},createOrder:function(){var t=this,e={detail:this.multipleSelection};e.user_id=h.user().id,e.sum=nt(e.detail),D("order/create",e).then(function(e){e.success&&(R.clear(),t.$router.push("/my/order/".concat(e.data.id)))})}}},ne=ie,re=(a("ef5e"),Object(g["a"])(ne,te,ee,!1,null,null,null)),le=re.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"order"},[t.$route.params.id?a("div",{staticClass:"order-detail"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix detail-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("订单详情")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.cancelDetail}},[t._v("关闭")])],1),a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"text-item"},[a("el-row",[a("el-col",{attrs:{span:4}},[t._v("订单编号:")]),a("el-col",{attrs:{span:20}},[t._v(t._s(t.orderDetail.id))])],1)],1),a("div",{staticClass:"text-item"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("span",[t._v("商品详情:")])]),a("el-col",{attrs:{span:20}},t._l(t.orderDetail.detail,function(e,s){return a("div",{key:s,staticClass:"product-item"},[a("span",[t._v(t._s(e.product_snapshot.title))]),t._l(e.prop,function(e,s){return a("span",{key:s},[t._v(t._s(e))])}),a("span",[t._v("数量:"+t._s(e.count))])],2)}),0)],1)],1),a("div",{staticClass:"text-item"},[a("el-row",[a("el-col",{attrs:{span:4}},[t._v("支付状态:")]),a("el-col",{attrs:{span:20}},[t.orderDetail._paid?a("span",[t._v("已支付")]):a("span",[t._v("未支付")])])],1)],1),a("div",{staticClass:"text-item"},[a("el-row",[a("el-col",{attrs:{span:4}},[t._v("支付方式:")]),a("el-col",{attrs:{span:20}},[t._v(t._s(t.lang.payment[t.orderDetail.pay_by]||"-"))])],1)],1)]),a("el-col",{staticClass:"text-center button",attrs:{span:8}},[a("div",{staticClass:"order-sum"},[a("span",{staticClass:"sum-text"},[t._v("总价")]),a("span",{staticClass:"rmb sum-numb"},[t._v(t._s(t.orderDetail.sum))])]),t.orderDetail._paid?a("div",{staticClass:"order-paid"},[t._v("支付成功")]):a("div",[a("div",{staticClass:"test-pay"},[t._v("测试支付为 0.01元")]),a("div",{staticClass:"order-pay"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.generatePaymentUrl("alipay")}}},[t._v("支付宝")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"若提示过期,请用支付宝测试",placement:"top-end"}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.generatePaymentUrl("wechat")}}},[t._v("微信支付")])],1)],1)])])],1)],1)],1):t._e(),a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,size:"small","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{width:"100",prop:"id",label:"ID"}}),a("el-table-column",{attrs:{width:"120",prop:"sum",label:"总价"}}),a("el-table-column",{attrs:{width:"120",label:"支付方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.lang.payment[e.row.pay_by]))]}}])}),a("el-table-column",{attrs:{width:"120",label:"支付状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row._paid?"已支付":"未支付"))]}}])}),a("el-table-column",{attrs:{width:"160",prop:"_paid_at",label:"支付时间"}}),a("el-table-column",{attrs:{width:"120",label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/my/order/"+e.row.id}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("详情")])],1)]}}])})],1),a("div",{staticClass:"pagination text-center"},[a("el-pagination",{attrs:{layout:"prev, pager, next, total","page-size":t.params.limit,total:t.total,"current-page":t.params.page},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("订单")])])}],ue={data:function(){return{list:[],id:null,params:{limit:8,page:1,where:{and:{user_id:null}}},total:0,orderDetail:{},lang:{payment:{alipay:"支付宝",wechat:"微信支付"}},loading:!0}},mounted:function(){this.id=h.user().id,this.params.where.and.user_id=this.id,this.read();var t=this.$route.params.id;t&&this.find(t)},methods:{read:function(){var t=this;this.loading=!0,D("order/read",this.params).then(function(e){e.success&&(t.list=e.data,t.total=e.total,t.loading=!1)})},tableRowClassName:function(t){var e=t.rowIndex;return e%2==1?"warning-row":"success-row"},handleDetail:function(t){this.orderDetail=t},find:function(t){var e=this;D("order/find",{id:t}).then(function(t){t.success&&(e.orderDetail=t.data)})},update:function(t,e){var a=this;D("order/update",{id:e,pay_by:t}).then(function(t){a.orderDetail=t.data})},generatePaymentUrl:function(t){var e=this;D("order/payment/url",{id:this.orderDetail.id,pay_by:t,fee:.01,return_url:rt("#/my/order/".concat(this.orderDetail.id))}).then(function(a){a.success&&(e.orderDetail.$payment=a.data,"wechat"===t?e.$alert("<img src="+a.data.qrcode+"alt='支付二维码'>","扫码支付",{dangerouslyUseHTMLString:!0,callback:function(){e.update(t,e.orderDetail.id),e.read()}}):(window.open(a.data.url),e.$alert("支付完成后请点击确定","支付宝支付",{confirmButtonText:"确定",callback:function(){e.update(t,e.orderDetail.id),e.read()}})))})},cancelDetail:function(){this.$router.push("/my/order")},handleCurrentChange:function(t){this.params.page=t,this.read()}}},de=ue,me=(a("53a3"),Object(g["a"])(de,oe,ce,!1,null,null,null)),pe=me.exports,fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin"},[a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"head"},[a("h2",[t._v("管理中心")])]),a("el-menu",{staticClass:"admin-menu",attrs:{router:!0}},[a("el-menu-item",{attrs:{index:"/admin/user"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),a("el-menu-item",{attrs:{index:"/admin/brand"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("品牌管理")])]),a("el-menu-item",{attrs:{index:"/admin/cat"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("分类管理")])]),a("el-menu-item",{attrs:{index:"/admin/product"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("商品管理")])])],1)],1),a("el-col",{attrs:{span:20}},[a("router-view")],1)],1)],1)])},he=[],ve={},_e=ve,ge=(a("faee"),Object(g["a"])(_e,fe,he,!1,null,null,null)),be=ge.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"button"},[a("el-button",{attrs:{round:"",size:"small",type:"success"},on:{click:function(e){t.show=!0,t.errors={}}}},[a("span",[t._v("创建用户")])])],1),t.show?a("div",{staticClass:"form"},[a("el-form",{attrs:{size:"small","label-width":"3rem"}},[a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{placeholder:"必填项"},nativeOn:{keyup:function(e){return t.debounceValidate("username")}},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),t._l(t.errors.username,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.username[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"手机"},nativeOn:{keyup:function(e){return t.debounceValidate("phone")}}},[a("el-input",{attrs:{placeholder:"选填项"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),t._l(t.errors.phone,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.phone[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"邮箱"},nativeOn:{keyup:function(e){return t.debounceValidate("mail")}}},[a("el-input",{attrs:{placeholder:"选填项"},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}}),t._l(t.errors.mail,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.mail[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"密码"},nativeOn:{keyup:function(e){return t.debounceValidate("password")}}},[a("el-input",{attrs:{placeholder:"必填项","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._l(t.errors.password,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.password[s].msg))]):t._e()])})],2),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:t.pending},on:{click:t.createOrUpdate}},[t._v("提交")]),a("el-button",{on:{click:t.cancelEdit}},[t._v("取消")])],1)],1)],1):t._e(),a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,size:"small","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{width:"80",prop:"id",label:"ID"}}),a("el-table-column",{attrs:{width:"160",prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{width:"160",prop:"phone",label:"手机号"}}),a("el-table-column",{attrs:{width:"160",prop:"mail",label:"邮箱"}}),a("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination text-center"},[a("el-pagination",{attrs:{layout:"prev, pager, next, total","page-size":t.params.limit,total:t.total,"current-page":t.params.page},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},ye=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("用户管理")])])}],we=a("75fc"),ke={data:function(){return{loading:!0}},mounted:function(){this.read()},methods:{read:function(){var t=this;this.loading=!0,D("".concat(this.model,"/read"),this.params).then(function(e){e.success&&(t.list=e.data,t.total=e.total,t.loading=!1)})},debounceValidate:function(t){var e=this;this.form.id&&this.form[t]==this.formCopy[t]||(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.validate(t)},500))},validate:function(t){var e=this,a=this.rules[t],s=!0,i=function(i){var n=a[i],r=n.params||[],l=gt.apply(void 0,[i,e.form[t]].concat(Object(we["a"])(r)));"boolean"===typeof l?(l||(s=!1),e.afterValidate(t,i,l)):(e.pending=!0,l.then(function(a){e.afterValidate(t,i,a),e.pending=!1,e.asynValid=a}))};for(var n in a)i(n);return s},afterValidate:function(t,e,a){this.errors[t]||this.$set(this.errors,t,{}),this.$set(this.errors[t],e,!a)},validateForm:function(){var t=!0;for(var e in this.rules)this.form.id&&this.form[e]===this.formCopy[e]||this.validate(e)||(t=!1);return t},tableRowClassName:function(t){var e=t.rowIndex;return e%2==1?"warning-row":"success-row"},handleDelete:function(t){var e=this;confirm("确定删除")&&D("".concat(this.model,"/delete"),{id:t}).then(function(t){t.success&&e.read()})},handleEdit:function(t){this.show=!0,this.formCopy=Object(Vt["a"])({},t),this.form=t},cancelEdit:function(){this.form={},this.show=!1,this.errors={}},createOrUpdate:function(){var t=this;if(this.validateForm()&&this.asynValid){var e=this.form.id?"update":"create";D("".concat(this.model,"/").concat(e),this.form).then(function(e){e.success&&(t.read(),t.form={},t.formCopy={},t.show=!1,t.errors={})})}},handleCurrentChange:function(t){this.params.page=t,this.read()}}},xe={mixins:[ke],data:function(){return{model:"user",list:[],show:!1,form:{},rules:{username:{required:{msg:"此项为必填项"},unique:{params:["user","exists","username"],msg:"昵称已存在"},lengthBetween:{params:[4,12],msg:"昵称长度应在4至12位之间"}},phone:{unique:{params:["user","exists","phone"],msg:"手机号已注册"},phone:{msg:"手机格式不正确"}},mail:{unique:{params:["user","exists","mail"],msg:"邮箱已注册"},mail:{msg:"邮箱格式不正确"}},password:{required:{msg:"此项为必填项"},lengthBetween:{params:[6,32],msg:"密码长度在6到32位之间"}}},errors:{},tiemr:null,asynValid:!1,pending:!0,formCopy:{},params:{limit:8,page:1},total:0}}},$e=xe,Oe=(a("84ac"),Object(g["a"])($e,Ce,ye,!1,null,null,null)),Se=Oe.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"button"},[a("el-button",{attrs:{round:"",size:"small",type:"success"},on:{click:function(e){t.show=!0,t.errors={}}}},[a("span",[t._v("添加品牌")])])],1),t.show?a("div",{staticClass:"form"},[a("el-form",{attrs:{size:"small","label-width":"4rem"}},[a("el-form-item",{attrs:{label:"品牌名"},nativeOn:{keyup:function(e){return t.debounceValidate("name")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._l(t.errors.name,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.name[s].msg))]):t._e()])})],2),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:t.pending},on:{click:t.createOrUpdate}},[t._v("提交")]),a("el-button",{on:{click:t.cancelEdit}},[t._v("取消")])],1)],1)],1):t._e(),a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,size:"small","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{width:"80",prop:"id",label:"ID"}}),a("el-table-column",{attrs:{width:"160",prop:"name",label:"品牌名"}}),a("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination text-center"},[a("el-pagination",{attrs:{layout:"prev, pager, next, total","page-size":t.params.limit,total:t.total,"current-page":t.params.page},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},Ne=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("品牌管理")])])}],qe={mixins:[ke],data:function(){return{model:"brand",list:[],show:!1,form:{},rules:{name:{required:{msg:"此项为必填项"},unique:{params:["brand","exists","name"],msg:"品牌已存在"}}},errors:{},tiemr:null,asynValid:!1,pending:!0,formCopy:{},params:{limit:5,page:1},total:0}}},De=qe,Ee=Object(g["a"])(De,Pe,Ne,!1,null,null,null),Ie=Ee.exports,Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"button"},[a("el-button",{attrs:{round:"",size:"small",type:"success"},on:{click:function(e){t.show=!0,t.errors={}}}},[a("span",[t._v("添加分类")])])],1),t.show?a("div",{staticClass:"form"},[a("el-form",{attrs:{size:"small","label-width":"4rem"}},[a("el-form-item",{attrs:{label:"分类名"},nativeOn:{keyup:function(e){return t.debounceValidate("name")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._l(t.errors.name,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.name[s].msg))]):t._e()])})],2),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:t.pending},on:{click:t.createOrUpdate}},[t._v("提交")]),a("el-button",{on:{click:t.cancelEdit}},[t._v("取消")])],1)],1)],1):t._e(),a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,size:"small","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{width:"80",prop:"id",label:"ID"}}),a("el-table-column",{attrs:{width:"160",prop:"name",label:"分类名"}}),a("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination text-center"},[a("el-pagination",{attrs:{layout:"prev, pager, next, total","page-size":t.params.limit,total:t.total,"current-page":t.params.page},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},ze=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("分类管理")])])}],je={mixins:[ke],data:function(){return{model:"cat",list:[],show:!1,form:{},rules:{name:{required:{msg:"此项为必填项"},unique:{params:["cat","exists","name"],msg:"分类已存在"}}},errors:{},tiemr:null,asynValid:!1,pending:!0,formCopy:{},params:{limit:5,page:1},total:0}}},Ve=je,Be=Object(g["a"])(Ve,Me,ze,!1,null,null,null),Ue=Be.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"content"},[a("div",{staticClass:"button"},[a("el-button",{attrs:{round:"",size:"small",type:"success"},on:{click:function(e){t.show=!0,t.errors={}}}},[a("span",[t._v("添加商品")])])],1),t.show?a("div",{staticClass:"form-product"},[a("el-form",{attrs:{size:"small","label-width":"4rem"}},[a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){return t.debounceValidate("brand_id")}},model:{value:t.form.brand_id,callback:function(e){t.$set(t.form,"brand_id",e)},expression:"form.brand_id"}},t._l(t.brand,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._l(t.errors.brand_id,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.brand_id[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){return t.debounceValidate("cat_id")}},model:{value:t.form.cat_id,callback:function(e){t.$set(t.form,"cat_id",e)},expression:"form.cat_id"}},t._l(t.cat,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._l(t.errors.cat_id,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.cat_id[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"新品"}},[a("el-switch",{model:{value:t.form.is_new,callback:function(e){t.$set(t.form,"is_new",e)},expression:"form.is_new"}})],1),a("el-form-item",{attrs:{label:"热卖"}},[a("el-switch",{model:{value:t.form.is_hot,callback:function(e){t.$set(t.form,"is_hot",e)},expression:"form.is_hot"}})],1),a("el-form-item",{attrs:{label:"标题"},nativeOn:{keyup:function(e){return t.debounceValidate("title")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._l(t.errors.title,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.title[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"描述"},nativeOn:{keyup:function(e){return t.debounceValidate("desc")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}}),t._l(t.errors.desc,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.desc[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"价格"},nativeOn:{keyup:function(e){return t.debounceValidate("price")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),t._l(t.errors.price,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.price[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"库存"},nativeOn:{keyup:function(e){return t.debounceValidate("total")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.total,callback:function(e){t.$set(t.form,"total",e)},expression:"form.total"}}),t._l(t.errors.total,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.total[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"运费"},nativeOn:{keyup:function(e){return t.debounceValidate("shipping_fee")}}},[a("el-input",{attrs:{placeholder:"必填项"},model:{value:t.form.shipping_fee,callback:function(e){t.$set(t.form,"shipping_fee",e)},expression:"form.shipping_fee"}}),t._l(t.errors.shipping_fee,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.shipping_fee[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"属性"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"属性"},model:{value:t.formProp.key,callback:function(e){t.$set(t.formProp,"key",e)},expression:"formProp.key"}})],1),a("el-form-item",{attrs:{label:"选项"}},[a("el-input",{attrs:{placeholder:"用 | 隔开"},model:{value:t.formProp.value,callback:function(e){t.$set(t.formProp,"value",e)},expression:"formProp.value"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addProp}},[t._v("确定")])],1)],1),t._l(t.form.prop,function(e,s){return a("div",{key:s},[a("span",{staticClass:"form-prop"},[t._v(t._s(s)+" : "+t._s(e))]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(s)}}}),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.editProp(s,e)}}})],1)}),t._l(t.errors.prop,function(e,s){return a("div",{key:s,staticClass:"error"},[e?a("div",[t._v(t._s(t.rules.prop[s].msg))]):t._e()])})],2),a("el-form-item",{attrs:{label:"主图"}},[a("Uploader",{attrs:{file:t.form.main_img},on:{change:t.mainFile}})],1),a("el-form-item",{attrs:{label:"详情图"}},[a("Uploader",{attrs:{file:t.form.detail},on:{change:t.detailFile}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.createOrUpdate}},[t._v("提交")]),a("el-button",{on:{click:t.cancelEdit}},[t._v("取消")])],1)],1)],1):t._e(),a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,size:"small"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品价格:"}},[a("span",[t._v(t._s(e.row.price))])]),a("el-form-item",{attrs:{label:"商品运费:"}},[a("span",[t._v(t._s(e.row.shipping_fee))])]),a("el-form-item",{attrs:{label:"商品库存:"}},[a("span",[t._v(t._s(e.row.total))])]),a("el-form-item",{attrs:{label:"商品属性:"}},[a("span",[t._v(t._s(e.row.prop))])]),a("el-form-item",{attrs:{label:"商品分类:"}},[a("span",[t._v(t._s(e.row.$cat.name))])]),a("el-form-item",{attrs:{label:"商品品牌:"}},[a("span",[t._v(t._s(e.row.$brand.name))])]),e.row.main_img?a("el-form-item",{attrs:{label:"商品主图:"}},t._l(e.row.main_img,function(t,e){return a("div",{key:e,staticClass:"table-img"},[a("img",{attrs:{src:t.url,alt:"图"}})])}),0):t._e(),e.row.detail?a("el-form-item",{attrs:{label:"商品详情:"}},t._l(e.row.detail,function(t,e){return a("div",{key:e,staticClass:"table-img"},[a("img",{attrs:{src:t.url,alt:"图"}})])}),0):t._e()],1)]}}])}),a("el-table-column",{attrs:{width:"80",label:"商品 ID",prop:"id"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"title"}}),a("el-table-column",{attrs:{label:"描述",prop:"desc"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination text-center"},[a("el-pagination",{attrs:{layout:"prev, pager, next, total","page-size":t.params.limit,total:t.total,"current-page":t.params.page},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},Ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h2",[t._v("商品管理")])])}],Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:"https://mock.biaoyansu.com/api/1/_file/create",headers:t.headers,"list-type":"picture-card","file-list":t.file||[],"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleUploaderSuccess}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},He=[],Re={props:["file"],data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:[],headers:{}}},mounted:function(){this.setHeader(),this.fileList=this.file||[]},methods:{handleUploaderSuccess:function(t){var e=t.data.id,a="https://"+t.data._base_url+"/"+t.data._key,s=t.data._original_name;this.fileList.push({id:e,name:s,url:a}),this.$emit("change",this.fileList)},handleRemove:function(t){var e=this;console.log(t);var a=t.id;D("_file/delete",{id:a}).then(function(t){t.success&&(e.fileList.forEach(function(t,s){t.id===a&&e.fileList.splice(s,1)}),e.$emit("change",e.fileList))})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},setHeader:function(){var t="3625bc2df9f51babd0d651bef817667d6ab61c9bfdfac059045baa308aabcd81";function e(t,e){return btoa(t+e)}var a=(new Date).getTime(),s=e(t,a);this.headers={"BIAO-MOCK-APP-KEY":t,"BIAO-MOCK-TIMESTAMP":a,"BIAO-MOCK-SIGNATURE":s}}}},Ke=Re,Fe=Object(g["a"])(Ke,Te,He,!1,null,"3fb2c90e",null),We=Fe.exports,Je={components:{Uploader:We},mixins:[ke],data:function(){return{model:"product",list:[],brand:[],cat:[],show:!1,form:{},rules:{title:{required:{msg:"此项为必填项"}},desc:{required:{msg:"此项为必填项"}},price:{required:{msg:"此项为必填项"},min:{params:[0],msg:"不能小于0"}},shipping_fee:{required:{msg:"此项为必填项"},min:{params:[0],msg:"不能小于0"}},prop:{required:{msg:"此项为必填项"}},brand_id:{required:{msg:"此项为必填项"}},cat_id:{required:{msg:"此项为必填项"}},total:{required:{msg:"此项为必填项"},min:{params:[0],msg:"不能小于0"}}},errors:{},tiemr:null,asynValid:!0,pending:!0,formCopy:{},params:{limit:8,page:1,with:["belongs_to:cat","belongs_to:brand"]},total:0,formProp:{}}},mounted:function(){this.readOther("brand"),this.readOther("cat")},methods:{readOther:function(t){var e=this;D("".concat(t,"/read")).then(function(a){a.success&&(e[t]=a.data)})},addProp:function(){this.formProp.value&&this.formProp.key&&(this.form.prop={},this.form.prop[this.formProp.key]=this.formProp.value,this.formProp={})},editProp:function(t,e){this.$set(this.formProp,"key",t),this.$set(this.formProp,"value",e)},deleteProp:function(t){this.formProp={},this.$delete(this.form.prop,t)},mainFile:function(t){this.form.main_img=t},detailFile:function(t){this.form.detail=t}}},Ye=Je,Ge=(a("3cee"),Object(g["a"])(Ye,Le,Ae,!1,null,"0ca96df9",null)),Qe=Ge.exports,Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"not-find"},[a("div",{staticClass:"container"},[a("div",{staticClass:"box text-center"},[a("h1",[t._v("404 未找到页面")]),a("span",[a("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)])])])},Xe=[],ta={},ea=ta,aa=(a("0780"),Object(g["a"])(ea,Ze,Xe,!1,null,"2c16d9c4",null)),sa=aa.exports;window.api=D,s["default"].use(w.a),s["default"].use(k["a"]);var ia=new k["a"]({routes:[{path:"/",component:at},{path:"/product/:id",component:ut},{path:"/signup",component:wt},{path:"/login",component:Pt},{path:"/recover",component:Mt},{path:"/search",component:At},{path:"/my",component:Wt,children:[{path:"setting",component:Xt},{path:"cart",component:le},{path:"order/:id?",component:pe}]},{path:"/admin",component:be,children:[{path:"user",component:Se},{path:"brand",component:Ie},{path:"cat",component:Ue},{path:"product",component:Qe}]},{path:"*",component:sa}],scrollBehavior:function(){return{x:0,y:0}}});ia.beforeEach(function(t,e,a){/admin/.test(t.matched[0].path)?h.user()&&h.user().IS_ADMIN?a():a(!1):/my/.test(t.matched[0].path)?h.user()?a():a("/login"):(/login/.test(t.path)||/signup/.test(t.path))&&h.user()?a(!1):a()}),s["default"].filter("cutAll",function(t,e){return t?(t=t.toString(),t.slice(0,e)+(t.length>e?"...":"")):""}),new s["default"]({router:ia,render:function(t){return t(C)}}).$mount("#app")},"585e":function(t,e,a){},"7cf0":function(t,e,a){},"83d8":function(t,e,a){},"84ac":function(t,e,a){"use strict";var s=a("88ff"),i=a.n(s);i.a},"88ff":function(t,e,a){},"8b71":function(t,e,a){"use strict";var s=a("e3a2"),i=a.n(s);i.a},"8d1b":function(t,e,a){"use strict";var s=a("7cf0"),i=a.n(s);i.a},"8e83":function(t,e,a){},9694:function(t,e,a){"use strict";var s=a("ad21"),i=a.n(s);i.a},a3e4:function(t,e,a){"use strict";var s=a("ce1a"),i=a.n(s);i.a},ad21:function(t,e,a){},b664:function(t,e,a){},c6d9:function(t,e,a){"use strict";var s=a("1377"),i=a.n(s);i.a},c863:function(t,e,a){},ca24:function(t,e,a){},ce1a:function(t,e,a){},e3a2:function(t,e,a){},e800:function(t,e,a){"use strict";var s=a("8e83"),i=a.n(s);i.a},e903:function(t,e,a){"use strict";var s=a("b664"),i=a.n(s);i.a},ef5e:function(t,e,a){"use strict";var s=a("2797"),i=a.n(s);i.a},f54e:function(t,e,a){"use strict";var s=a("1f56"),i=a.n(s);i.a},faee:function(t,e,a){"use strict";var s=a("83d8"),i=a.n(s);i.a},fe8b:function(t,e,a){"use strict";var s=a("ca24"),i=a.n(s);i.a}});
//# sourceMappingURL=app.62858317.js.map